cfgs:
  default:
    branches: ['master']

  release-branches:
    branches: ['rel-.*', 'hotfix-.*']
    inherit:
      test-infra:
        jobs:
          release:
            traits:
              version:
                preprocess: 'finalize'
              component_descriptor: ~
              release:
                nextversion: 'bump_patch'
              slack:
                default_channel: 'internal_scp_workspace'
                channel_cfgs:
                  internal_scp_workspace:
                    channel_name: 'k8s-oq'
                    slack_cfg_name: 'scp_workspace'
              publish:
                dockerimages:
                  tm-base-image:
                    registry: 'gcr-readwrite'
                    image: eu.gcr.io/gardener-project/gardener/testmachinery/base-step
                    dockerfile: 'Dockerfile'
                    dir: 'hack/images/base'
                    tag_as_latest: true
                  tm-controller:
                    registry: 'gcr-readwrite'
                    image: eu.gcr.io/gardener-project/gardener/testmachinery/testmachinery-controller
                    dockerfile: 'Dockerfile'
                    target: tm-controller
                    tag_as_latest: true
                  telemetry-controller:
                    registry: 'gcr-readwrite'
                    image: eu.gcr.io/gardener-project/gardener/testmachinery/telemetry-controller
                    dockerfile: 'Dockerfile'
                    target: telemetry-controller
                    tag_as_latest: true
                  tm-run:
                    registry: 'gcr-readwrite'
                    image: eu.gcr.io/gardener-project/gardener/testmachinery/testmachinery-run
                    dockerfile: 'Dockerfile'
                    target: tm-run
                    tag_as_latest: true
                  tm-bot:
                    registry: 'gcr-readwrite'
                    image: eu.gcr.io/gardener-project/gardener/testmachinery/bot
                    dockerfile: 'Dockerfile'
                    target: tm-bot
                    tag_as_latest: true
                  tm-prepare-image:
                    registry: 'gcr-readwrite'
                    image: eu.gcr.io/gardener-project/gardener/testmachinery/prepare-step
                    dockerfile: 'Dockerfile'
                    target: tm-prepare
                    tag_as_latest: true
            steps:
              check:
                image: 'golang:1.14.1'
              test:
                image: 'golang:1.14.1'